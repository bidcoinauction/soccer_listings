<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soccer eBay Lister</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="container header-inner">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true">‚öΩ</div>
        <div class="brand-text">
          <h1 class="title">Soccer eBay Lister</h1>
          <p class="subtitle">Browse your inventory, filter, and copy clean eBay listing text.</p>
        </div>
      </div>

      <div class="header-actions">
        <a class="btn btn-secondary" id="downloadTsv" href="./full_card_inventory.tsv" download>
          Download TSV
        </a>
        <a class="btn btn-secondary" id="downloadCsv" href="./ebay_listing.csv" download>
          Download eBay CSV
        </a>
      </div>
    </div>
  </header>

  <main class="app-main">
    <section class="container">
      <div class="toolbar">
        <div class="toolbar-row">
          <label class="field field-search" aria-label="Search">
            <span class="field-label">Search</span>
            <div class="field-control">
              <input
                id="searchInput"
                type="search"
                placeholder="Player, team, set, card #, season‚Ä¶"
                autocomplete="off"
              />
              <button class="icon-btn" id="clearSearch" type="button" title="Clear search" aria-label="Clear search">
                ‚úï
              </button>
            </div>
          </label>

          <label class="field">
            <span class="field-label">Set</span>
            <select id="setFilter">
              <option value="">All</option>
            </select>
          </label>

          <label class="field">
            <span class="field-label">Team</span>
            <select id="teamFilter">
              <option value="">All</option>
            </select>
          </label>

          <label class="field">
            <span class="field-label">League</span>
            <select id="leagueFilter">
              <option value="">All</option>
            </select>
          </label>
        </div>

        <div class="toolbar-row toolbar-row-secondary">
          <label class="check">
            <input id="autoOnly" type="checkbox" />
            <span>Auto only</span>
          </label>

          <label class="check">
            <input id="numberedOnly" type="checkbox" />
            <span>Numbered only (/xx)</span>
          </label>

          <button class="btn btn-ghost" id="clearFilters" type="button">Clear filters</button>

          <div class="toolbar-spacer"></div>

          <p class="tip" id="tipText">
            Tip: click a card to open details, then copy title/description.
          </p>
        </div>
      </div>

      <div class="status-row">
        <div class="status-pill" id="resultCount" aria-live="polite">Loading inventory‚Ä¶</div>
        <div class="status-muted" id="activeFilters" aria-live="polite"></div>
      </div>

      <section class="grid" id="cardGrid" aria-label="Inventory results">
        <!-- JS renders cards here -->
      </section>

      <div class="empty-state" id="emptyState" hidden>
        <div class="empty-icon" aria-hidden="true">üóÇÔ∏è</div>
        <h2>No matches</h2>
        <p>Try clearing filters or searching a different term.</p>
        <button class="btn btn-secondary" type="button" id="emptyClear">Clear filters</button>
      </div>
    </section>
  </main>

  <!-- Modal / Details -->
  <div class="modal-backdrop" id="modalBackdrop" hidden></div>

  <aside class="modal" id="detailsModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" hidden>
    <div class="modal-header">
      <div class="modal-header-text">
        <div class="modal-kicker">Selected</div>
        <h2 class="modal-title" id="modalTitle">‚Äî</h2>
      </div>
      <button class="icon-btn" id="closeModal" type="button" aria-label="Close">‚úï</button>
    </div>

    <div class="modal-body">
      <dl class="meta-grid">
        <div class="meta-item">
          <dt>Set</dt>
          <dd id="modalSet">‚Äî</dd>
        </div>
        <div class="meta-item">
          <dt>Card #</dt>
          <dd id="modalCardNumber">‚Äî</dd>
        </div>
        <div class="meta-item">
          <dt>Features</dt>
          <dd id="modalFeatures">‚Äî</dd>
        </div>
        <div class="meta-item">
          <dt>Season</dt>
          <dd id="modalSeason">‚Äî</dd>
        </div>
        <div class="meta-item">
          <dt>Brand</dt>
          <dd id="modalBrand">‚Äî</dd>
        </div>
        <div class="meta-item">
          <dt>Condition</dt>
          <dd id="modalCondition">‚Äî</dd>
        </div>
      </dl>

      <div class="modal-actions">
        <button class="btn btn-primary" id="copyTitleBtn" type="button">Copy eBay Title</button>
        <button class="btn btn-secondary" id="copyDescBtn" type="button">Copy eBay Description (HTML)</button>
      </div>

      <div class="divider"></div>

      <div class="modal-preview">
        <div class="preview-label">Card Name</div>
        <div class="preview-value" id="modalCardName">‚Äî</div>
      </div>

      <div class="modal-images" id="modalImages">
        <!-- optional: JS can inject images -->
      </div>
    </div>
  </aside>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite" hidden>
    <span class="toast-dot" aria-hidden="true"></span>
    <span id="toastText">Copied</span>
  </div>

  <script src="./app.js"></script>

  <!-- tiny UX glue that won't fight app.js -->
  <script>
    // Non-invasive helpers: clear search button + empty-state clear button.
    (function () {
      const $ = (id) => document.getElementById(id);

      const search = $("searchInput");
      const clear = $("clearSearch");
      const emptyClear = $("emptyClear");
      const clearFilters = $("clearFilters");

      function updateClearBtn() {
        clear.style.visibility = search.value ? "visible" : "hidden";
      }

      if (search && clear) {
        updateClearBtn();
        search.addEventListener("input", updateClearBtn);
        clear.addEventListener("click", () => {
          search.value = "";
          search.dispatchEvent(new Event("input", { bubbles: true }));
          search.focus();
          updateClearBtn();
        });
      }

      if (emptyClear && clearFilters) {
        emptyClear.addEventListener("click", () => clearFilters.click());
      }
    })();
  </script>
</body>
</html>

