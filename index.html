<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soccer eBay Lister</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="container header-inner">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true">‚öΩ</div>
        <div class="brand-text">
          <h1 class="title">Soccer eBay Lister</h1>
          <p class="subtitle">Browse your inventory, filter, and copy clean eBay listing text.</p>
        </div>
      </div>

      <div class="header-actions">
        <a class="btn btn-secondary" href="./full_card_inventory.tsv" download>Download TSV</a>
        <a class="btn btn-secondary" href="./ebay_listing.csv" download>Download eBay CSV</a>
      </div>
    </div>
  </header>

  <main class="app-main">
    <section class="container">
      <div class="toolbar">
        <div class="toolbar-row">
          <label class="field field-search">
            <span class="field-label">Search</span>
            <div class="field-control">
              <input id="searchInput" type="search" placeholder="Player, team, set, card #, season‚Ä¶" autocomplete="off" />
              <button class="icon-btn icon-btn-sm" id="clearSearch" type="button" aria-label="Clear search" title="Clear">‚úï</button>
            </div>
          </label>

          <label class="field">
            <span class="field-label">Set</span>
            <select id="setFilter">
              <option value="">All</option>
            </select>
          </label>

          <label class="field">
            <span class="field-label">Team</span>
            <select id="teamFilter">
              <option value="">All</option>
            </select>
          </label>

          <label class="field">
            <span class="field-label">League</span>
            <select id="leagueFilter">
              <option value="">All</option>
            </select>
          </label>
        </div>

        <div class="toolbar-row toolbar-row-secondary">
          <label class="pill-check">
            <input id="autoOnly" type="checkbox" />
            <span>Auto only</span>
          </label>

          <label class="pill-check">
            <input id="numberedOnly" type="checkbox" />
            <span>Numbered only (/xx)</span>
          </label>

          <button class="btn btn-ghost" id="clearFilters" type="button">Clear filters</button>

          <div class="toolbar-spacer"></div>

          <p class="tip">Tip: click a card to open details, then copy title/description.</p>
        </div>
      </div>

      <div class="status-row">
        <div class="status-pill" id="resultCount" aria-live="polite">Loading‚Ä¶</div>
        <div class="status-muted" id="activeFilters" aria-live="polite"></div>
      </div>

      <section class="grid" id="cardGrid" aria-label="Inventory results"></section>

      <div class="empty-state" id="emptyState" hidden>
        <div class="empty-icon" aria-hidden="true">üóÇÔ∏è</div>
        <h2>No matches</h2>
        <p>Try a different search term or clear filters.</p>
        <button class="btn btn-secondary" id="emptyClear" type="button">Clear filters</button>
      </div>
    </section>
  </main>

  <!-- Backdrop + Drawer -->
  <div class="modal-backdrop" id="modalBackdrop" hidden></div>

  <aside class="modal" id="detailsModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" hidden>
    <div class="modal-header">
      <div class="modal-header-text">
        <div class="modal-kicker">Selected card</div>
        <h2 class="modal-title" id="modalTitle">‚Äî</h2>
      </div>
      <button class="icon-btn" id="closeModal" type="button" aria-label="Close">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="modal-image-wrap">
        <img id="mImage" class="modal-image" alt="" />
        <div class="modal-image-actions">
          <button class="btn btn-secondary" id="openImageBtn" type="button">Open image</button>
          <button class="btn btn-secondary" id="copyImageBtn" type="button">Copy image URL</button>
        </div>
      </div>

      <div class="meta-block">
        <div class="meta-grid">
          <div class="meta-item"><div class="meta-label">Player</div><div class="meta-value" id="mPlayer">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">Card Number</div><div class="meta-value" id="modalCardNumber">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">Team</div><div class="meta-value" id="mTeam">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">Set</div><div class="meta-value" id="modalSet">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">Manufacturer</div><div class="meta-value" id="modalBrand">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">Season</div><div class="meta-value" id="modalSeason">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">League</div><div class="meta-value" id="mLeague">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">Features</div><div class="meta-value" id="modalFeatures">‚Äî</div></div>
          <div class="meta-item"><div class="meta-label">Condition</div><div class="meta-value" id="modalCondition">‚Äî</div></div>
        </div>
      </div>

      <div class="modal-actions">
        <button class="btn btn-primary" id="copyTitleBtn" type="button">Copy eBay Title</button>
        <button class="btn btn-primary" id="copyDescBtn" type="button">Copy eBay Description (HTML)</button>
        <button class="btn btn-ghost" id="appendEbayBtn" type="button">Append + Download updated CSV</button>
      </div>

      <div class="divider"></div>

      <div class="preview-block">
        <div class="preview-label">Title preview</div>
        <div class="preview-box" id="mTitlePreview">‚Äî</div>

        <div class="preview-label">Description preview (HTML string)</div>
        <pre class="preview-pre" id="mDescPreview">‚Äî</pre>

        <div class="preview-label">CSV row preview</div>
        <pre class="preview-pre" id="mCsvRowPreview">‚Äî</pre>
      </div>
    </div>
  </aside>

  <div class="toast" id="toast" hidden>
    <span class="toast-dot" aria-hidden="true"></span>
    <span id="toastText">Copied</span>
  </div>

  <script src="./app.js"></script>

  <script>
    // tiny UI nicety: clear search
    (function () {
      const s = document.getElementById("searchInput");
      const c = document.getElementById("clearSearch");
      const emptyClear = document.getElementById("emptyClear");
      const clearFilters = document.getElementById("clearFilters");

      function sync() { c.style.visibility = s.value ? "visible" : "hidden"; }
      sync();
      s.addEventListener("input", sync);
      c.addEventListener("click", () => {
        s.value = "";
        s.dispatchEvent(new Event("input", { bubbles: true }));
        s.focus();
        sync();
      });

      emptyClear.addEventListener("click", () => clearFilters.click());
    })();
  </script>
</body>
</html>

